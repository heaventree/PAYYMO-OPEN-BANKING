<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payymo - Stripe Checkout Test</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <style>
        .pricing-card {
            transition: transform 0.3s;
        }
        .pricing-card:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <div class="container py-5">
        <div class="row mb-4">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4">Payymo Pricing</h1>
                <p class="lead">Choose the plan that works best for your business</p>
            </div>
        </div>
        
        <div class="row">
            <!-- Basic Plan -->
            <div class="col-lg-4 mb-4">
                <div class="card pricing-card h-100">
                    <div class="card-body">
                        <h5 class="card-title text-center">Basic</h5>
                        <h6 class="card-subtitle mb-2 text-muted text-center">For Small Businesses</h6>
                        <p class="card-text text-center display-4">$25<small class="text-muted">/mo</small></p>
                        <hr>
                        <ul class="list-unstyled mb-4">
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Connect up to 3 banks</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Process up to 100 transactions</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Basic invoice matching</li>
                            <li class="mb-2"><i class="bi bi-x-circle-fill text-muted me-2"></i> Advanced analytics</li>
                            <li class="mb-2"><i class="bi bi-x-circle-fill text-muted me-2"></i> Priority support</li>
                        </ul>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary checkout-button" data-price-id="price_1R5c2kLpZ58pNWEfbF2YrgyR" data-mode="subscription">Subscribe Now</button>
                            <button class="btn btn-outline-primary one-time-button" data-price-id="price_1R5c2kLpZ58pNWEfbF2YrgyR" data-mode="payment">Buy One Month</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pro Plan (placeholder) -->
            <div class="col-lg-4 mb-4">
                <div class="card pricing-card h-100 border-primary">
                    <div class="card-header bg-primary text-white text-center">Most Popular</div>
                    <div class="card-body">
                        <h5 class="card-title text-center">Pro</h5>
                        <h6 class="card-subtitle mb-2 text-muted text-center">For Growing Businesses</h6>
                        <p class="card-text text-center display-4">$75<small class="text-muted">/mo</small></p>
                        <hr>
                        <ul class="list-unstyled mb-4">
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Connect up to 10 banks</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Unlimited transactions</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Advanced invoice matching</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Advanced analytics</li>
                            <li class="mb-2"><i class="bi bi-x-circle-fill text-muted me-2"></i> Priority support</li>
                        </ul>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary checkout-button" data-price-id="price_1R5c2kLpZ58pNWEfbF2YrgyR" data-mode="subscription">Subscribe Now</button>
                            <button class="btn btn-outline-primary one-time-button" data-price-id="price_1R5c2kLpZ58pNWEfbF2YrgyR" data-mode="payment">Buy One Month</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Enterprise Plan (placeholder) -->
            <div class="col-lg-4 mb-4">
                <div class="card pricing-card h-100">
                    <div class="card-body">
                        <h5 class="card-title text-center">Enterprise</h5>
                        <h6 class="card-subtitle mb-2 text-muted text-center">For Large Organizations</h6>
                        <p class="card-text text-center display-4">$199<small class="text-muted">/mo</small></p>
                        <hr>
                        <ul class="list-unstyled mb-4">
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Unlimited bank connections</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Unlimited transactions</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Advanced invoice matching</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> Custom analytics dashboard</li>
                            <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i> 24/7 Priority support</li>
                        </ul>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary checkout-button" data-price-id="price_1R5c2kLpZ58pNWEfbF2YrgyR" data-mode="subscription">Subscribe Now</button>
                            <button class="btn btn-outline-primary one-time-button" data-price-id="price_1R5c2kLpZ58pNWEfbF2YrgyR" data-mode="payment">Buy One Month</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle subscription checkout buttons
            const checkoutButtons = document.querySelectorAll('.checkout-button');
            checkoutButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const priceId = this.getAttribute('data-price-id');
                    const mode = this.getAttribute('data-mode');
                    
                    // Create checkout session
                    fetch('/checkout/create-session', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            price_id: priceId,
                            quantity: 1,
                            mode: mode,
                            success_url: window.location.origin + '/checkout/success',
                            cancel_url: window.location.origin + '/checkout/cancel'
                        }),
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success && data.checkout_url) {
                            window.location.href = data.checkout_url;
                        } else {
                            alert('Error creating checkout session: ' + (data.error || 'Unknown error'));
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error creating checkout session');
                    });
                });
            });
            
            // Handle one-time payment buttons
            const oneTimeButtons = document.querySelectorAll('.one-time-button');
            oneTimeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const priceId = this.getAttribute('data-price-id');
                    const mode = this.getAttribute('data-mode');
                    
                    // Redirect to checkout
                    fetch('/checkout/create-session', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            price_id: priceId,
                            quantity: 1,
                            mode: mode,
                            success_url: window.location.origin + '/checkout/success',
                            cancel_url: window.location.origin + '/checkout/cancel'
                        }),
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success && data.checkout_url) {
                            window.location.href = data.checkout_url;
                        } else {
                            alert('Error creating checkout session: ' + (data.error || 'Unknown error'));
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Error creating checkout session');
                    });
                });
            });
        });
    </script>
</body>
</html>